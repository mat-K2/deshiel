!!!
%html

  %head
    %title Deshiel
    %meta{"http-equiv"=>"Content-Type", :content=>"text/html; charset=utf-8"}/
    = stylesheet_link_tag "application"
    = javascript_include_tag "application"
    = csrf_meta_tag
    = yield(:head)

  %body
    %nav.navbar.navbar-default.navbar-fixed-top
      .container
        .navbar-header
          .navbar-brand
            %a{:href => root_path}
              Deshiel
          - if current_user
            %ul.nav.navbar-nav
              %li.pupil-li
                = link_to '弟子', pupil_home_path
              %li.master-li
                = link_to '師匠', master_home_path
        .navbar-collapse.collapse
          - if current_user
            %ul.nav.navbar-nav.navbar-right
              %li.user-li
                = link_to current_user.name, user_path(current_user)
              %li= link_to 'ログアウト', destroy_user_session_path, method: :delete
          - else
            = form_for(resource, as: resource_name, url: session_path(resource_name), html: { class: 'navbar-form navbar-right' }) do |f|
              .form-group
                = f.email_field :email, class: 'form-control', placeholder: 'Email'
              .form-group
                = f.password_field :password, class: 'form-control', placeholder: 'Password'
              = f.submit "ログイン", class: 'btn btn-default'

    .container
      = yield

:javascript
  $(document).ready(function() {
    var pathname = window.location.pathname;
    $('.navbar-nav li').removeClass("active")

    if (pathname.match(/\/master\//)) {
      $('.navbar-nav li.master-li').addClass("active")
    } else if (pathname.match(/\/pupil\//) || pathname == '/') {
      $('.navbar-nav li.pupil-li').addClass("active")
    }
  });
