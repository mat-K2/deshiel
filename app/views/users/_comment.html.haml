- if objective.comments.empty?
  - if type != User::QUESTION_TYPE[:p_a]
    = form_for entry do |f|
      = f.text_field :content
      = f.fields_for :entry_relationships do |f2|
        = f2.hidden_field :parent_id, :value => objective.id
        = f2.hidden_field :root_id, :value => objective.id
      = f.hidden_field :content_type, :value => type
      = f.submit "コメントする"
- else
  - objective.comments.each_with_index do |comment, i|
    %ul
      %li
        = comment.user.name if comment.user != current_user
        = comment.content
        - if current_user.my_post?(comment)
          = link_to "編集", edit_entry_path(comment)
        - unless comment.have_child?
          = link_to "削除", entry_path(comment, :content_type => type), :method => :delete
    - if i + 1 == objective.comments.count
      - unless current_user.thanked_objectives.include?(objective)
        - if type != User::QUESTION_TYPE[:p_a]
          = form_for entry do |f|
            = f.text_field :content
            = f.fields_for :entry_relationships do |f2|
              = f2.hidden_field :parent_id, :value => comment.id
              = f2.hidden_field :root_id, :value => objective.id
            = f.hidden_field :content_type, :value => type
            = f.submit "コメントする"
        - if type == User::QUESTION_TYPE[:m]
          = form_for current_user.thanks.build do |f_t|
            = f_t.hidden_field :entry_id, :value => objective.id
            = f_t.hidden_field :master_id, :value => objective.user.master.try(:id)
            = f_t.hidden_field :content_type, :value => type
            = f_t.submit "ありがとう"
